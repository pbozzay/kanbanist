(this["webpackJsonpkanban.ist"]=this["webpackJsonpkanban.ist"]||[]).push([[0],{316:function(e,t,n){e.exports=n.p+"static/media/kanbanist.94fc37cd.png"},352:function(e,t,n){e.exports=n(760)},707:function(e,t,n){},748:function(e,t,n){},750:function(e,t,n){},760:function(e,t,n){"use strict";n.r(t);n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(139),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(396),n(398),n(399),n(400),n(186),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(428),n(429),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(452),n(453),n(454),n(455),n(456),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(256),n(469),n(470),n(258),n(471),n(472),n(473),n(474),n(259),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),n(494),n(495),n(496),n(497),n(498),n(499),n(500),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(194),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),n(552),n(553),n(554),n(555),n(556),n(557),n(558),n(559),n(560),n(561),n(562),n(563),n(564),n(565),n(566),n(567),n(568),n(569),n(570),n(571),n(572),n(573),n(574),n(575),n(576),n(578),n(579),n(580),n(581),n(582),n(583),n(584),n(585),n(586),n(587),n(588),n(589),n(590),n(591),n(592),n(593),n(594),n(595),n(596),n(597),n(598),n(599),n(600),n(601),n(602),n(603),n(604),n(605),n(606),n(607),n(608),n(609),n(611),n(612),n(613),n(614),n(615),n(616),n(617),n(618),n(619),n(620),n(621),n(622),n(623),n(624),n(625),n(626),n(628),n(270);var a=n(0),r=n.n(a),i=n(36),o=n.n(i),s=n(102),l=n.n(s),c=n(42),u=n(15),d=n(16),m=n(18),f=n(17),p=n(65),h=n(63),b=n(128),g=n(169),E=n(768),v=n(103),y=n.n(v),k=n(66),w=n(88),I=n(33),j=n.n(I),O=n(104),A=n(2),D=n(766),_=(n(676),n(312)),T=n(14),C=n(11),L=n(133),N=n.n(L),x=n(308),S=n.n(x),B="https://api.todoist.com/sync/v8/sync",P=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getUser",value:function(e){return e.length<40&&console.warn("API Token: '".concat(e,"' looks too short...")),N()("".concat(B,"?token=").concat(e,'&resource_types=["user"]')).then((function(e){return 200===e.status?e.json():(console.warn("response was not HTTP/200 when checking API token. response:",e),Promise.resolve({error:"could not get user"}))})).catch((function(e){console.error("error getting user:",e)}))}},{key:"fetch",value:function(e){return N()("".concat(B,"?token=").concat(e,'&sync_token=*&resource_types=["labels","items","projects","collaborators"]')).then((function(e){return e.json()})).then((function(e){var t=e.labels;t.sort((function(e,t){return e.item_order-t.item_order})),t.forEach((function(e){e.name=e.name.replaceAll("_"," ").trim(),e.id="".concat(e.id)})),t=t.filter((function(e){return 0===e.is_deleted}));var n=e.items.map((function(e){return Object(T.a)({},e,{id:"".concat(e.id),labels:e.labels.map((function(e){return"".concat(e)})).filter((function(e){return t.some((function(t){return t.id===e}))}))})})),a=e.projects;a.sort((function(e,t){return e.item_order-t.item_order}));var r=e.collaborators;return{labels:t,items:n,projects:a,collaborators:r}}))}},{key:"updateItem",value:function(t,n){return e.sendCommand(t,e.createCommand("item_update",n))}},{key:"addItem",value:function(t,n,a){return e.sendCommand(t,e.createCommand("item_add",n,a))}},{key:"quickAddItem",value:function(e,t){var n=new S.a({token:e,text:t}),a="".concat("https://api.todoist.com/sync/v8/quick/add","?").concat(n.toString());return N()(a).then((function(e){return e.json()}))}},{key:"addLabel",value:function(t,n,a){return e.sendCommand(t,e.createCommand("label_add",n,a))}},{key:"updateLabelOrder",value:function(t,n){return e.sendCommand(t,e.createCommand("label_update_orders",{id_order_mapping:n}))}},{key:"updateLabelName",value:function(t,n,a){return e.sendCommand(t,e.createCommand("label_update",{id:n,name:a}))}},{key:"deleteLabel",value:function(t,n){return e.sendCommand(t,e.createCommand("label_delete",{id:n}))}},{key:"completeListItem",value:function(t,n){return e.completeListItems(t,[n])}},{key:"completeListItems",value:function(t,n){var a=[];return n.forEach((function(t){return a.push(e.createCommand("item_close",{id:t,force_history:0}))})),e.sendCommands(t,a)}},{key:"createCommand",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return{type:e,uuid:window.generateUUID(),args:t,temp_id:n}}},{key:"sendCommand",value:function(t,n){return e.sendCommands(t,[n])}},{key:"sendCommands",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t.length<=0)return console.warn("No commands provided, nothing to send. ",{commands:t}),new Promise((function(e,t){t({error:"NO_COMMANDS_PROVIDED"})}));var n="".concat(B,"?token=").concat(e,"&commands=").concat(JSON.stringify(t));return N()(n).then((function(e){var t=e.json();return t.then((function(e){console.log(e)})),t})).catch((function(e){return console.error("Error sending commands: ",e)}))}}]),e}();P.getAvatarUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";return"https://dcff1xvirvpfp.cloudfront.net/".concat(e,"_").concat(t,".jpg")};var R=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"append",value:function(e){return this.items.findIndex((function(t){return t.id===e.id}))>=0?this:new n({id:this.id,title:this.title,items:this.items.push(e)})}},{key:"prepend",value:function(e){return new n({id:this.id,title:this.title,items:this.items.insert(0,e)})}},{key:"insert",value:function(e,t){return new n({id:this.id,title:this.title,items:this.items.insert(e,t)})}},{key:"updateWith",value:function(e){var t=e.id,a=e.title,r=e.items;return new n({id:t||this.id,title:a||this.title,items:r||this.items})}},{key:"updateItem",value:function(e,t){var a=this.items.findIndex((function(t){return t.id===e.id}));return a<0?this:new n({id:this.id,title:this.title,items:this.items.set(a,t)})}},{key:"removeItem",value:function(e){return this.items.map((function(e){return e.id})).indexOf(e.id)<0?this:new n({id:this.id,title:this.title,items:this.items.filter((function(t){return t.id!==e.id}))})}},{key:"setItems",value:function(e){return new n({id:this.id,title:this.title,items:e})}},{key:"sort",value:function(e){return new n({id:this.id,title:this.title,items:this.items.sort(e)})}}]),n}(Object(C.Record)({id:0,title:"",items:C.List.of()})),F=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"updateWith",value:function(e){var t=e.id,a=e.text,r=e.item_order,i=e.project,o=e.due,s=e.priority,l=e.parent_id,c=e.responsible_uid,u=e.date_added,d=e.date_string;return new n({id:t||this.id,text:a||this.text,item_order:r||this.item_order,project:i||this.project,due_date_utc:o?o.date:this.due_date_utc,recurring:o&&o.is_recurring||this.recurring,priority:s||this.priority,parent_id:l||this.parent_id,responsible_uid:c||this.responsible_uid,date_added:u||this.date_added,date_string:d||this.date_string})}}]),n}(Object(C.Record)({id:0,text:"",item_order:0,project:0,due_date_utc:"",recurring:!1,priority:0,parent_id:null,responsible_uid:null,date_added:"",date_string:""})),M=Object(C.Record)({id:0,name:"",color:0,shared:!1,item_order:0,indent:0,parent_id:0}),U=Object(C.Record)({id:"",key:"",name:""}),G=new U({id:"none",key:1,name:"No Priority"}),Q=new C.List([new U({id:"p1",key:4,name:"Priority 1"}),new U({id:"p2",key:3,name:"Priority 2"}),new U({id:"p3",key:2,name:"Priority 3"}),G]),Y=n(33),V=function(e){return"0"===e},W=function(e){return V(e.id)},K=function(e){return"Inbox"===e.name},H={USER_SET:"Board",DATE_ADDED:"Date Added",DUE_DATE:"Due Date",PRIORITY:"Priority",PROJECT_ORDER:"Project Order"},J={ASC:"ASC",DESC:"DESC"},z="Warning: you are creating items for a filtered project.",Z="Warning: you are creating items while a Due Date filter is active.",q="Warning: you are creating items with a filtered priority.",X={NEXT_7_DAYS:"NEXT_7_DAYS",TODAY:"TODAY",NO_DUE_DATE:"NO_DUE_DATE"},$={lists:C.List.of(),filteredLists:C.List.of(),backlog:new R({id:0,title:"Backlog"}),projects:C.List.of(),defaultProjectId:void 0,filteredProjects:C.List.of(),filterDueDate:Object(C.Map)({startDate:null,endDate:null}),filteredPriorities:C.List.of(),showIfResponsible:!1,showSubtasks:!0,namedFilter:null,fetching:!1,fetchFail:null,sortBy:Object(C.Map)({field:H.USER_SET,direction:J.ASC}),collaborators:[]},ee="ADD_NEW_LIST",te="RENAME_LIST",ne="COMPLETE_LIST",ae="DELETE_LIST",re="ADD_LIST_ITEM",ie="UPDATE_LIST_ITEM",oe="COMPLETE_LIST_ITEM",se="UPDATE_ID",le="FETCH_REQUEST_SENT",ce="FETCH_SUCCESSFUL",ue="FETCH_FAILURE",de="CLEAR_ALL",me="UPDATE_LISTS_FILTER",fe="UPDATE_PROJECTS_FILTER",pe="UPDATE_DUE_DATE_FILTER",he="UPDATE_PRIORITY_FILTER",be="TOGGLE_ASSIGNEE_FILTER",ge="TOGGLE_SUBTASK_FILTER",Ee="SET_NAMED_FILTER",ve="CLEAR_FILTERS",ye="SET_DEFAULT_PROJECT",ke="SET_SORT_BY",we="MOVE_ITEM",Ie="UPDATE_LIST_INDEX",je={addList:function(e){return{type:ee,payload:e}},renameList:function(e,t){return{type:te,payload:{list:e,newListName:t}}},completeList:function(e){return{type:ne,payload:{list:e}}},deleteList:function(e){return{type:ae,payload:{list:e}}},addListItem:function(e,t,n){return{type:re,payload:{list:e,item:t,onHidden:n}}},updateListItem:function(e,t){return{type:ie,payload:{item:e,fields:t}}},updateId:function(e,t,n){return{type:se,payload:{type:e,old_id:t,new_id:n}}},completeListItem:function(e){return{type:oe,payload:{item:e}}},fetchLists:function(){return function(e,t){var n=t();e(je.fetchRequest()),P.fetch(n.user.user.token).then((function(t){var n=t.labels,a=t.items,r=t.projects,i=t.collaborators;e(je.fetchSuccess(n,a,r,i))})).catch((function(t){l.a.captureException(t),console.error("Could not fetch Todoist tasks: ",t),e(je.fetchFailure(t.message||"Could not fetch Todoist tasks"))}))}},fetchRequest:function(){return{type:le}},fetchSuccess:function(e,t,n,a){return{type:ce,payload:{labelList:e,items:t,projects:n,collaborators:a}}},fetchFailure:function(e){return{type:ue,payload:{error:e}}},clearAll:function(){return{type:de}},updateListsFilter:function(e){return{type:me,payload:{filteredLists:e}}},updateProjectsFilter:function(e){return{type:fe,payload:{filteredProjects:e}}},updateDueDateFilter:function(e,t){return{type:pe,payload:{startDate:e,endDate:t}}},updatePriorityFilter:function(e){return{type:he,payload:{filteredPriorities:e}}},toggleAssigneeFilter:function(){return{type:be}},toggleSubtaskFilter:function(){return{type:ge}},setNamedFilter:function(e){return{type:Ee,payload:{namedFilter:e}}},clearFilters:function(){return{type:ve}},setDefaultProject:function(e){return{type:ye,payload:{projectId:e}}},setSortBy:function(e,t){return{type:ke,payload:{field:e,direction:t}}},moveItem:function(e,t,n,a){return{type:we,payload:{itemId:e,fromListId:t,toListId:n,itemIndex:a}}},updateListIndex:function(e,t){return{type:Ie,payload:{listId:e,newIndex:t}}}};function Oe(e,t){for(var n=t.payload,a=n.name,r=n.temp_id,i=a,o=e.lists.map((function(e){return e.title})).contains(i);o;)i+=" 2",o=e.lists.map((function(e){return e.title})).contains(i);var s=new R({title:i,id:r,items:C.List.of()});return Object(T.a)({},e,{lists:e.lists.push(s)})}function Ae(e,t){for(var n=t.payload,a=n.list,r=n.newListName,i=e.lists.map((function(e){return e.title})).contains(r);i;)r+=" 2",i=e.lists.map((function(e){return e.title})).contains(r);var o=e.lists.map((function(e){if(e.id===a.id){var t=e.id,n=e.items;return new R({id:t,items:n,title:r})}return e}));return Object(T.a)({},e,{lists:o})}function De(e,t){var n=t.payload.list.id,a=e.lists.find((function(e){return e.id===n})),r=e.lists.filter((function(e){return e.id!==n})),i=e.backlog.setItems(e.backlog.items.concat(a.items));return Object(T.a)({},e,{lists:r,backlog:i})}function _e(e,t){var n=t.payload.list.id,a=e.lists.map((function(e){return e.id===n?e.setItems(C.List.of()):e}));return Object(T.a)({},e,{lists:a})}function Te(e,t){var n=t.payload,a=n.list,r=n.item,i=n.onHidden,o=r.content,s=r.temp_id,l=r.item_order,c=e.lists,u=e.projects,d=e.backlog,m=e.defaultProjectId,f=u.find(K),p=m||f.id;e.filteredProjects.find((function(e){return e.id===p}))?i(z):e.filterDueDate.get("startDate",!1)?i(Z):e.filteredPriorities.map((function(e){return e.id})).contains(G.id)&&i(q);var h=u.find((function(e){return e.id===m}),null,u.find(K)),b=new Date,g=new F({text:o,id:s,item_order:l,project:h,date_added:b});if(W(a))return Object(T.a)({},e,{backlog:d.append(g)});var E=c.map((function(e){return e.id===a.id?e.append(g):e}));return Object(T.a)({},e,{lists:E})}function Ce(e,t){var n=t.payload,a=n.item,r=n.fields,i=e.lists.map((function(e){return e.updateItem(a,a.updateWith(r))})),o=e.backlog.updateItem(a,a.updateWith(r));return Object(T.a)({},e,{lists:i,backlog:o})}function Le(e,t){var n=t.payload.item,a=e.backlog,r=e.lists;if(a.items.contains(n))return Object(T.a)({},e,{backlog:a.removeItem(n)});var i=r.map((function(e){return e.removeItem(n)}));return Object(T.a)({},e,{lists:i})}function Ne(e,t){var n=t.payload,a=n.type,r=n.old_id,i=n.new_id;switch(a){case F:return function(e,t,n){var a=e.lists.reduce((function(e,n){var a=n.items.find((function(e){return e.id===t}),null);return a?{list:n,item:a}:e}),{list:null,item:null}),r=a.list,i=a.item;if(null===r||null===i)return console.error("Could not find list or item for id update: ",{old_id:t,new_id:n}),e;var o=e.lists.map((function(e){return e.id!==r.id?e:e.updateItem(i,i.updateWith({id:n}))}));return Object(T.a)({},e,{lists:o})}(e,r,i);case R:return function(e,t,n){var a=e.lists.map((function(e){return e.id!==t?e:e.updateWith({id:n})}));return Object(T.a)({},e,{lists:a})}(e,r,"".concat(i));default:return console.error("Updating id for unknown type: ",a),e}}function xe(e,t){var n=t.payload.filteredLists,a=Object(C.Set)(n).subtract(Object(C.Set)(e.filteredLists)).toList().reduce((function(e,t){return t.get("items").reduce((function(e,t){return e.append(t)}),e)}),e.backlog);return a=Object(C.Set)(e.filteredLists).subtract(Object(C.Set)(n)).toList().reduce((function(e,t){return t.get("items").reduce((function(e,t){return e.removeItem(t)}),e)}),a),Object(T.a)({},e,{backlog:a,filteredLists:n})}function Se(e,t){var n=t.payload.filteredProjects;return Object(T.a)({},e,{filteredProjects:n})}function Be(e,t){var n=t.payload.filteredPriorities;return Object(T.a)({},e,{filteredPriorities:n})}function Pe(e,t){var n=t.payload,a=n.startDate,r=n.endDate;return Object(T.a)({},e,{filterDueDate:Object(C.Map)({startDate:a,endDate:r})})}function Re(e,t){return Object(T.a)({},e,{showIfResponsible:!e.showIfResponsible})}function Fe(e,t){return Object(T.a)({},e,{showSubtasks:!e.showSubtasks})}function Me(e,t){var n=t.payload.namedFilter;return Object.keys(X).some((function(e){return e===n}))||null===n?Object(T.a)({},e,{namedFilter:n}):(console.error("unknown named filter",n),e)}function Ue(e,t){return Object(T.a)({},e,{fetching:!0})}function Ge(e,t){var n=t.payload,a=n.labelList,r=n.items,i=n.projects,o=n.collaborators,s=i.reduce((function(e,t){return e[t.id]=new M(t),e}),{});console.log(a);var l=[Y().add(0,"days"),Y().add(1,"days"),Y().add(2,"days"),Y().add(3,"days"),Y().add(4,"days")],c=Object(C.List)(l.map((function(e){return new R({id:e.toISOString(),title:e.isSame(new Date,"Day")?e.format("dddd")+" (Today)":e.format("dddd"),items:Object(C.List)(r.filter((function(t){return null!=t.due&&Y(t.due.date).isSame(e,"day")})).filter((function(e){var t=s[e.project_id];return t||(console.warn("item is missing valid project, skipping..."),console.warn(JSON.stringify({projects:i,item:e},null,2))),!!t})).filter((function(e){return!e.checked})).map((function(e){return new F(Object(T.a)({},e,{due_date_utc:e.due&&e.due.date,recurring:e.due&&e.due.is_recurring,text:e.content,project:s[e.project_id]}))})))})}))),u=Object(C.Set)(e.filteredLists.map((function(e){return e.id}))),d=c.filter((function(e){return u.has(e.id)})),m=new R({id:"0",title:"Backlog",items:Object(C.List)(r.filter((function(e){return 0===e.labels.length||C.Set.of.apply(C.Set,Object(O.a)(e.labels)).intersect(u).size>0})).filter((function(e){var t=s[e.project_id];return t||(console.warn("item in backlog is missing valid project, skipping..."),console.warn(JSON.stringify({projects:i,item:e},null,2))),!!t})).filter((function(e){return!e.checked})).map((function(e){return new F(Object(T.a)({},e,{due_date_utc:e.due&&e.due.date,recurring:e.due&&e.due.is_recurring,text:e.content,project:s[e.project_id]}))})))}),f=Object(C.List)(Object.keys(s).map((function(e){return s[e]}))),p=e.filteredProjects.map((function(e){return e.id})),h=f.filter((function(e){return p.contains(e.id)}));return Object(T.a)({},e,{projects:f,filteredProjects:h,lists:c,filteredLists:d,backlog:m,fetching:!1,fetchFail:null,collaborators:o})}function Qe(e,t){return Object(T.a)({},e,{fetching:!1,fetchFail:t.payload.error})}function Ye(e,t){var n=t.payload.projectId;return Object(T.a)({},e,{defaultProjectId:n})}function Ve(e,t){var n=t.payload,a=n.field,r=n.direction;if(H[a]&&J[r]){var i=e.sortBy.set("field",H[a]).set("direction",J[r]);return Object(T.a)({},e,{sortBy:i})}return console.warn("unknown sortBy field ".concat(a," or sortBy direction ").concat(r)),e}function We(e,t){console.log("Updating list item with..."+t.payload);var n=t.payload,a=n.itemId,r=n.fromListId,i=n.toListId,o=n.itemIndex,s=e.lists.push(e.backlog).find((function(e){return e.id===r})).get("items").find((function(e){return e.id===a})),l=e.lists.map((function(e){var t=e;return e.id===r&&(t=t.removeItem(s)),e.id!==i||t.get("items").some((function(e){return e.id===s.id}))||(t=t.insert(o,s)),t})),c=e.backlog;return V(r)&&(c=c.removeItem(s)),V(i)&&(c=c.insert(o,s)),Object(T.a)({},e,{lists:l,backlog:c})}function Ke(e,t){var n=t.payload,a=n.listId,r=n.newIndex,i=e.lists,o=i.find((function(e){return e.id===a}));return Object(T.a)({},e,{lists:i.filter((function(e){return e.id!==a})).insert(r,o)})}function He(e,t){var n=e.lists,a=e.backlog,r=e.sortBy.get("field"),i=e.sortBy.get("direction"),o=function(e,t,n){return 0};switch(r){case H.USER_SET:o=function(e,t,n){var a=n?n.get("items").findIndex((function(t){return t.id===e.id})):1,r=n?n.get("items").findIndex((function(e){return e.id===t.id})):0;return(a=a>-1?a:n.get("items").size)<=(r=r>-1?r:n.get("items").size)?-1:1};break;case H.DATE_ADDED:o=function(e,t){var n=Y(e.date_added),a=Y(t.date_added),r=n.isSame(a)?0:n.isBefore(a)?-1:1;return i===J.ASC?r:-1*r};break;case H.DUE_DATE:o=function(e,t){if(!e.due_date_utc&&!t.due_date_utc)return 0;if(!e.due_date_utc)return 1;if(!t.due_date_utc)return-1;var n=Y(e.due_date_utc),a=Y(t.due_date_utc),r=n.isSame(a)?0:n.isBefore(a)?-1:1;return i===J.ASC?r:-1*r};break;case H.PRIORITY:var s=i===J.ASC;o=function(e,t){return(s?1:-1)*Math.sign(t.priority-e.priority)};break;case H.PROJECT_ORDER:o=function(e,t){var n=0;return n=e.project.item_order<t.project.item_order?-1:e.project.item_order>t.project.item_order?1:Math.sign(e.item_order-t.item_order),(i===J.ASC?1:-1)*n};break;default:console.warn("unknown sortBy.field: ".concat(r))}return Object(T.a)({},e,{lists:n.map((function(e){var n=t.lists.find((function(t){return t.id===e.id}));return e.sort((function(e,t){return o(e,t,n)}))})),backlog:a.sort((function(e,t){return o(e,t,a)}))})}var Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Oe(e,t);case te:return Ae(e,t);case ae:return De(e,t);case ne:return _e(e,t);case re:return He(Te(e,t),e);case ie:return Ce(e,t);case se:return He(Ne(e,t),e);case oe:return Le(e,t);case me:return xe(e,t);case fe:return Se(e,t);case pe:return Pe(e,t);case he:return Be(e,t);case be:return Re(e);case ge:return Fe(e);case Ee:return Me(e,t);case le:return Ue(e);case ce:return He(Ge(e,t),e);case ue:return Qe(e,t);case ve:return Object(T.a)({},e,{filteredProjects:$.filteredProjects,filteredLists:$.filteredLists,filterDueDate:$.filterDueDate,filteredPriorities:$.filteredPriorities,showIfResponsible:!1,showSubtasks:!0,namedFilter:null});case de:return $;case ye:return Ye(e,t);case ke:return He(Ve(e,t),e);case we:return We(e,t);case Ie:return Ke(e,t);default:return e}},ze=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCheckbox=function(t,n){var a=n.target,r="checkbox"===a.type?a.checked:a.value;e.props.onChange(t,r)},e.handleAllCheckbox=function(t){var n=t.target,a="checkbox"===n.type?n.checked:n.value;e.props.onChangeAll(a)},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.checkboxItems,a=t.selectedItems,i=t.labelProperty,o=n.filter((function(e){return!a.contains(e)})).isEmpty();return r.a.createElement("div",{className:"FilterMenu"},r.a.createElement("div",{className:"FilterMenu-checkboxes"},r.a.createElement(k.d,{style:{fontWeight:"bold"},key:"all-checkbox",checked:o,label:"All",onChange:this.handleAllCheckbox}),n.map((function(t){return r.a.createElement(k.d,{key:t.id,checked:a.contains(t),label:t[i],onChange:function(n){return e.handleCheckbox(t,n)},style:{marginLeft:"".concat(22*t.indent,"px")}})}))))}}]),n}(r.a.Component);ze.defaultProps={title:"Filter Menu",labelProperty:"title",onChange:function(e,t){return console.log("item: ".concat(e,", isChecked: ").concat(t))},onChangeAll:function(e){return console.log("allItems: ".concat(e))}};var Ze=n(167),qe=n(767),Xe=(n(206),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleDateChange=function(t){var n=e.props,a=n.setNamedFilter,r=n.updateDueDateFilter,i=Object(Ze.a)(t,2),o=i[0],s=i[1],l=null!==o?j()(o).startOf("day"):null,c=null!==s?j()(s).endOf("day"):null;a(null),r(l,c)},e.handleNamedFilter=function(t){var n=e.props,a=n.updateDueDateFilter,r=n.setNamedFilter;console.debug("TODO: setNamedFilter",t),t?(a(null,null),r(t)):r(null)},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.filterDueDate,a=t.namedFilter,i=n.get("startDate",null),o=n.get("endDate",null),s=null!==i?i.toDate():null,l=null!==o?o.toDate():null;return r.a.createElement("div",{className:"DueDateFilterMenu FilterMenu"},r.a.createElement("p",null,r.a.createElement("strong",null,"Dynamic")),r.a.createElement(k.b,{small:!0,className:"Toolbar-button",text:"Today",title:"Dynamic filter - Today",onClick:function(){a===X.TODAY?e.handleNamedFilter(null):e.handleNamedFilter(X.TODAY)},active:a===X.TODAY}),r.a.createElement(k.b,{small:!0,className:"Toolbar-button",text:"Next 7 Days",title:"Dynamic filter - Next 7 days",onClick:function(){a===X.NEXT_7_DAYS?e.handleNamedFilter(null):e.handleNamedFilter(X.NEXT_7_DAYS)},active:a===X.NEXT_7_DAYS}),r.a.createElement(k.b,{small:!0,className:"Toolbar-button",title:"Dynamic filter - No Due Date",text:"No Due Date",onClick:function(){a===X.NO_DUE_DATE?e.handleNamedFilter(null):e.handleNamedFilter(X.NO_DUE_DATE)},active:a===X.NO_DUE_DATE}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("strong",null,"Date Range")),r.a.createElement(qe.a,{value:[s,l],onChange:this.handleDateChange,shortcuts:!1}))}}]),n}(r.a.Component)),$e={updateDueDateFilter:je.updateDueDateFilter,setNamedFilter:je.setNamedFilter},et=Object(c.c)((function(e){var t=e.lists;return{filterDueDate:t.filterDueDate,namedFilter:t.namedFilter}}),$e)(Xe),tt=(n(707),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.lists,n=e.filteredLists,a=e.updateListsFilter,i=e.projects,o=e.filteredProjects,s=e.updateProjectsFilter,l=e.showIfResponsible,c=e.toggleAssigneeFilter,u=e.showSubtasks,d=e.toggleSubtaskFilter,m=e.onClearFilters,f=e.defaultProjectId,p=e.setDefaultProject,h=e.filteredPriorities,b=e.updatePriorityFilter,g=e.sortBy,E=e.setSortBy;return(r.a.createElement("div",{className:"Toolbar"},r.a.createElement("div",{className:"inner"},r.a.createElement(k.o,{position:_.PopoverPosition.BOTTOM_RIGHT,className:"Toolbar-item"},r.a.createElement(k.a,{text:"Lists",icon:"property"}),r.a.createElement(ze,{checkboxItems:t,selectedItems:t.filter((function(e){return!n.contains(e)})),onChange:function(e,t){var r=t?n.filter((function(t){return t.id!==e.id})):n.push(e);a(r)},onChangeAll:function(e){return a(e?n.filter((function(e){return!1})):t)}})),r.a.createElement(k.o,{className:"Toolbar-item"},r.a.createElement(k.a,{text:"Projects",icon:"projects"}),r.a.createElement(ze,{checkboxItems:i.sort((function(e,t){return Math.sign(e.item_order-t.item_order)})),selectedItems:i.filter((function(e){return!o.contains(e)})),labelProperty:"name",onChange:function(e,t){var n=function e(t,n){var a,r=n.filter((function(e){return e.parent_id===t.id}));return 0===r.length?[t]:(a=[t]).concat.apply(a,Object(O.a)(r.map((function(t){return e(t,n)}))))}(e,i),a=t?o.filter((function(e){return!n.some((function(t){return t.id===e.id}))})):o.push.apply(o,Object(O.a)(n));s(a)},onChangeAll:function(e){return s(e?o.filter((function(e){return!1})):i)}})),r.a.createElement(k.o,{className:"Toolbar-item"},r.a.createElement(k.a,{text:"Priority",icon:"flag"}),r.a.createElement(ze,{checkboxItems:Q,labelProperty:"name",selectedItems:Q.filter((function(e){return!h.contains(e)})),onChange:function(e,t){var n=t?h.filter((function(t){return t.id!==e.id})):h.push(e);b(n)},onChangeAll:function(e){return b(e?Q.filter((function(e){return!1})):Q)}})),r.a.createElement(k.o,{className:"Toolbar-item"},r.a.createElement(k.a,{text:"Due",icon:"calendar"}),r.a.createElement(et,null)),r.a.createElement(k.b,{className:"Toolbar-item",text:"Assigned to me",icon:"user",active:l,onClick:c}),r.a.createElement(k.b,{className:"Toolbar-item",text:"".concat(u?"Hide":"Show"," Sub-tasks"),icon:"list-detail-view",active:!u,onClick:d}),r.a.createElement(k.b,{className:"Toolbar-item",text:"Clear Filters",icon:"remove",intent:w.a.DANGER,onClick:m}),r.a.createElement("span",{className:"light-divider bp3-navbar-divider"}),r.a.createElement(D.a,{className:"Toolbar-item",items:i.toArray(),itemRenderer:function(e,t){var n=t.handleClick,a=t.modifiers;return a.matchesPredicate?r.a.createElement(k.l,{active:e.id===f,disabled:a.disabled,key:e.id,onClick:n,text:e.name}):null},onItemSelect:function(e){var t=e.id;return p(t)},filterable:!1},r.a.createElement(k.b,{text:"New Items Project",icon:"add-to-artifact",rightIcon:"double-caret-vertical"})),r.a.createElement(D.a,{className:"Toolbar-item",items:Object.keys(H).map((function(e){return{key:e,value:H[e]}})),itemRenderer:function(e,t){var n=t.handleClick;if(!t.modifiers.matchesPredicate)return null;var a=g.get("field")===e.value,i=g.get("direction")===J.ASC,o="blank";return a&&(o=i?"caret-up":"caret-down"),r.a.createElement(k.l,{className:a?A.a.ACTIVE:"",key:e.key,onClick:n,text:e.value,icon:o})},onItemSelect:function(e){var t=g.get("field")===e.value,n=g.get("direction")===J.ASC;E(e.key,t&&n?J.DESC:J.ASC)},filterable:!1},r.a.createElement(k.b,{text:"Sort Lists",icon:"sort",rightIcon:"double-caret-vertical"})))))}}]),n}(a.Component)),nt={setDefaultProject:je.setDefaultProject,updatePriorityFilter:je.updatePriorityFilter,toggleAssigneeFilter:je.toggleAssigneeFilter,toggleSubtaskFilter:je.toggleSubtaskFilter,setSortBy:je.setSortBy},at=Object(c.c)((function(e){return{projects:e.lists.projects,filteredPriorities:e.lists.filteredPriorities,defaultProjectId:e.lists.defaultProjectId,showIfResponsible:e.lists.showIfResponsible,showSubtasks:e.lists.showSubtasks,sortBy:e.lists.sortBy}}),nt)(tt),rt=n(82),it=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleAdd=function(){var e=a.props,t=e.addList,n=e.user.is_premium;0!==a.state.text.length&&n&&(t({name:a.state.text.trim(),temp_id:window.generateUUID()}),a.setState({text:""},(function(){document.getElementById("new-list-input").scrollIntoView(),window.scroll(0,0)})))},a.handleIfEnter=function(e){"Enter"===e.key&&a.handleAdd()},a.state={text:"",isFocused:!1},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props.user,n=this.state.isFocused,a=t.is_premium,i=r.a.createElement(k.b,{className:A.a.MINIMAL,icon:"add",intent:w.a.SUCCESS,disabled:0===this.state.text.length||!a,onClick:this.handleAdd});return r.a.createElement("div",{className:"NewListInput list-panel-item",id:"new-list-input"},r.a.createElement(k.o,{usePortal:!0,isOpen:n&&!a,content:r.a.createElement(k.c,null,"Creating lists requires ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://todoist.com/premium?ref=kanbanist"},"Todoist Premium"),"."),target:r.a.createElement(k.j,{value:this.state.text,type:"text",placeholder:"Add a list...",onKeyPress:this.handleIfEnter,onChange:function(t){return e.setState({text:a?t.target.value:""})},rightElement:i,className:"NewListInput-input",onFocus:function(){return e.setState({isFocused:!0})},onBlur:function(){return setTimeout((function(){return e.setState({isFocused:!1})}),100)}})}))}}]),n}(r.a.Component),ot={addList:je.addList},st=Object(c.c)((function(e){return{user:e.user.user}}),ot)(it),lt=n(4),ct=n.n(lt),ut=n(44),dt=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleRename=function(){var e=a.state.title,t=a.props.onRename;e.length>0?a.setState({isEditing:!1},(function(){return t(e)})):a.setState({title:a.props.title})},a.state={title:e.title,isEditing:!1},a}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e,t){this.props.title!==e.title&&this.setState({title:this.props.title})}},{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,a=t.showListMenu,i=t.onDelete,o=t.onCompleteAll,s=this.state.isEditing,l=r.a.createElement(k.k,null,r.a.createElement(k.l,{icon:"trash",onClick:i,text:"Delete list"}),r.a.createElement(k.l,{icon:"tick",onClick:o,text:"Mark all as done"})),c=r.a.createElement(k.o,{content:l,position:ut.a.RIGHT},r.a.createElement(k.b,{className:"list-panel-title-close-button bp3-minimal bp3-small",icon:"menu-open"}));return r.a.createElement("div",{className:"list-panel-title"},r.a.createElement("div",{className:"list-panel-title-text-div",onClick:function(){return e.setState({isEditing:!0})}},r.a.createElement(k.g,{isEditing:s,className:"list-panel-title-text",value:this.state.title,disabled:n,onChange:function(t){return e.setState({title:t})},onConfirm:this.handleRename,onCancel:function(){return e.setState({isEditing:!1})}})),r.a.createElement("div",{className:"list-panel-title-close-button-div"},a?c:r.a.createElement("div",null)))}}]),n}(r.a.Component),mt=n(765),ft=(n(292),n(214)),pt=n(215),ht=n.n(pt),bt=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"updateWith",value:function(e){var t=e.due_moment,a=e.has_time;return new n({due_moment:t||this.due_moment,has_time:null!=a?a:this.has_time})}},{key:"isExpired",value:function(){return this.due_moment.isBefore(j()().startOf("day"))}},{key:"format",value:function(){var e=this.due_moment.year()===j()().year()?"Do MMM":"Do MMM YY",t=this.has_time?e+" LT":e;return this.due_moment.format(t)}}]),n}(Object(C.Record)({due_moment:null,has_time:!1})),gt=function(e){var t=j()(e),n=!0;return 0!==t.hours()||0!==t.minutes()||0!==t.seconds()||0!==t.milliseconds()||/:/.test(e)||(n=!1),new bt({due_moment:t,has_time:n})},Et="DATE",vt="RELATIVE",yt=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;Object(u.a)(this,n),(a=t.call(this,e)).handleToggleDisplayType=function(){var e=a.state.displayType===vt?Et:vt;a.setState({displayType:e})};var r=e.dueDate;return a.state={dueDate:r?gt(r):null,displayType:Et},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state,t=e.dueDate,n=e.displayType;if(null===t)return null;var a="";switch(n){case Et:a=t.format();break;case vt:a=t.due_moment.fromNow();break;default:console.error("Unknown displayType for ListItemDueDate: ",n)}var i=["ListItem-project-duedate",t.isExpired()?"overdue":""].join(" ");return(r.a.createElement("span",{className:i,onClick:this.handleToggleDisplayType},a))}}]),n}(r.a.Component),kt=/\[\[\s*outlook=id3=(.*?),([^\]]*)\]\]/,wt=function(e){return kt.test(e)},It=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).format=function(e){if(wt(e))return a.formatOutlookLink(e);var t=e.replace(/!!(.*?)!!/g,"**$1**").replace(/[^[(]?(https?:\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,}) \((.*?)\)/g,"[$2]($1)");return ft.markdown.toHTML(t).replace(/<\/?p>/g,"").replace(/a href/g,'a target="_blank" href').replace(/<h(\d)>/g,(function(e,t){return"#".repeat(t)})).replace(/<\/h\d>/g,"")},a.formatOutlookLink=function(e){var t=a.getOutlookContent(e);return ft.markdown.toHTML(t).replace(/<\/?p>/g,"")},a.getOutlookContent=function(e){return e.match(/\[\[\s*outlook=id3=(.*?),([^\]]*)\]\]/)[2]},a.updateOutlookItem=function(e,t){var n=e.split(",")[0];return"".concat(n,",").concat(t,"]]")},a.handleChange=function(e){var t=a.state.rawText,n=wt(t);if(e.indexOf("\n")>=0)a.updateItem();else{var r=n?a.updateOutlookItem(t,e):e;a.setState({rawText:r})}},a.handleCheck=function(){a.setState({checked:!0},(function(){return setTimeout((function(){return a.props.onComplete(a.props.item)}),800)}))},a.handleOnEdit=function(){a.setState({isEditing:!0})},a.handleCancel=function(){a.setState({formattedText:a.format(a.state.previousRawText),rawText:a.state.previousRawText,isEditing:!1})},a.updateItem=function(){var e=a.props,t=e.item,n=e.onUpdate,r=a.state.rawText;t.text!==r&&n(t,{text:r}),a.setState({previousRawText:r,isEditing:!1,formattedText:a.format(r)})},a.setDueDate=function(e){var t=a.props,n=t.item;(0,t.onUpdate)(n,{due:{date:e?j()(e).format("YYYY-MM-DD"):null}})},a.applyLinkFixes=function(){ht()("#".concat(a.props.item.id," a")).attr("target","_blank"),ht()("#".concat(a.props.item.id)).on("click","a",(function(e){return e.stopPropagation()}))},a.state={isEditing:!1,previousRawText:e.item.text,rawText:e.item.text,formattedText:a.format(e.item.text),checked:e.checked},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.applyLinkFixes()}},{key:"componentDidUpdate",value:function(){this.applyLinkFixes()}},{key:"render",value:function(){var e=this,t=this.props,n=t.item,a=t.collaborator,i=t.index,o=t.instanceList,s=this.state,l=s.checked,c=s.rawText,u=s.formattedText,d=s.isEditing,m=wt(c),f=n.recurring,p=l?.5:1;return r.a.createElement(rt.b,{key:"".concat(n.id),draggableId:"item-".concat(n.id,"-").concat(o.id),index:i},(function(t,i){return r.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:Object(T.a)({opacity:p},t.draggableProps.style),id:n.id,className:ct()("ListItem","color-".concat(n.project.color),{dragging:i.isDragging})}),r.a.createElement("div",{className:"ListItem-inner"},r.a.createElement("div",{className:"ListItem-inner-top"},r.a.createElement(k.d,{className:"ListItem-checkbox priority-".concat(n.priority),onChange:e.handleCheck,checked:l,disabled:d}),d?r.a.createElement(k.g,{className:"ListItem-text",multiline:!0,value:m?e.getOutlookContent(c):c,isEditing:!0,onChange:e.handleChange,disabled:l,onConfirm:function(){return e.setState({isEditing:!1,rawText:n.text})},onCancel:function(){return e.setState({isEditing:!1,rawText:n.text})}}):r.a.createElement("div",{className:"ListItem-text ListItem-text-formatted",onClick:e.handleOnEdit},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:u}}))),r.a.createElement("div",{className:"ListItem-inner-bottom"},r.a.createElement("div",{className:"non-edit-text"},r.a.createElement("div",{className:"left-align"},r.a.createElement("span",{className:"ListItem-project-name"},n.project.name),r.a.createElement("a",{href:"https://todoist.com/showTask?id=".concat(n.id),className:"task-link-wrapper"},r.a.createElement(k.i,{className:"ListItem-task-icon",icon:"link",iconSize:10})),r.a.createElement(k.o,{minimal:!0,position:ut.a.BOTTOM,content:r.a.createElement(mt.a,{clearButtonText:"No Date",highlightCurrentDay:!0,value:n.due_date_utc?new Date(n.due_date_utc):void 0,onChange:function(t,n){return n&&e.setDueDate(t)},showActionsBar:!0,minDate:j()().subtract(10,"years").toDate(),maxDate:j()().add(10,"years").toDate()}),target:r.a.createElement(k.i,{className:"task-link-wrapper ListItem-task-icon",icon:"calendar",iconSize:10})})),m?r.a.createElement(k.i,{className:"ListItem-recurring-icon",icon:"envelope",iconSize:12}):null,f?r.a.createElement(k.i,{className:"ListItem-recurring-icon",icon:"exchange",iconSize:14}):null,r.a.createElement(yt,{dueDate:n.due_date_utc}),a?a.image_id?r.a.createElement("img",{className:"ListItem-project-avatar",alt:"Assigned to ".concat(a.full_name),width:"18",height:"18",src:P.getAvatarUrl(a.image_id,"small"),"data-tip":a.full_name}):r.a.createElement("span",{"data-tip":a.full_name},a.full_name.split(" ").map((function(e){return e[0]})).join("")):null))))}))}}]),n}(r.a.Component),jt=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleBlur=function(){a.setState({newCommentText:"",isEditing:!1})},a.handleChange=function(e){var t=a.props.onAdd;if(e.indexOf("\n")>=0){var n=a.state.newCommentText;a.setState({newCommentText:"",isEditing:!1},(function(){return t(n)}))}else a.setState({newCommentText:e})},a.state={newCommentText:"",isEditing:!1},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return(r.a.createElement("div",{className:"NewListItemInput"},r.a.createElement("div",{onClick:function(){return e.setState({isEditing:!0})}},r.a.createElement(k.g,{isEditing:this.state.isEditing,multiline:!0,value:this.state.newCommentText,minLines:1,placeholder:"Add item (press enter to save)...",onChange:this.handleChange,onConfirm:this.handleBlur,onCancel:function(){return e.setState({isEditing:!1})}}))))}}]),n}(r.a.Component),Ot=k.p.create({className:"BoardToaster-toaster",position:ut.a.BOTTOM_RIGHT}),At=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).scrollToBottom=function(){setTimeout((function(){a.listItemsRef.current&&(a.listItemsRef.current.scrollTop=a.listItemsRef.current.scrollHeight)}),50)},a.addItem=function(e){if(!(e.length<=0)){var t=a.props,n=t.list,r=t.onAdd,i=e.replace(/(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&/=]*))/g,"[$1]($1)"),o=window.generateUUID(),s=n.items.reduce((function(e,t){return e>t.item_order?e:t.item_order}),0)+1;r(n,{content:i,temp_id:o,item_order:s,priority:G.key},a.handleNewItemIsHidden),a.scrollToBottom()}},a.handleNewItemIsHidden=function(e){Ot.show({message:e,intent:w.a.WARNING,timeout:5e3})},a.handleRename=function(e){var t=a.props,n=t.list,r=t.onListRename;n.title!==e&&r(n,e)},a.handleCompleteAll=function(){var e=a.props,t=e.list,n=e.onListCompleteAll;a.setState({allChecked:!0},(function(){return setTimeout((function(){n(t),a.setState({allChecked:!1})}),800)}))},a.handleDelete=function(){a.props.onListDelete(a.props.list)},a.state={allChecked:!1},a.listItemsRef=r.a.createRef(),a}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.list,a=t.canEditTitle,i=t.showListMenu,o=t.className,s=t.collaborators,l=t.draggableProps,c=t.style;return r.a.createElement("div",Object.assign({style:c,className:o+" List list-panel-item"},l),r.a.createElement(dt,{title:n.title,onRename:this.handleRename,onDelete:this.handleDelete,onCompleteAll:this.handleCompleteAll,disabled:!a,showListMenu:i}),r.a.createElement(rt.c,{droppableId:"".concat(n.id)},(function(t,a){return r.a.createElement("div",{className:"List-list-items-wrapper",ref:t.innerRef},r.a.createElement("div",{className:ct()("List-list-items",{isDraggingOver:a.isDraggingOver}),ref:e.listItemsRef},n.items.map((function(t,a){return r.a.createElement(It,{index:a,key:"".concat(t.id,"|").concat(t.text.hashCode(),"|").concat(t.due_date_utc,"|").concat(e.state.allChecked),item:t,instanceList:n,onUpdate:e.props.onListItemUpdate,onComplete:e.props.onListItemComplete,checked:e.state.allChecked,collaborator:s.find((function(e){return e.id===t.responsible_uid}))})})),r.a.createElement("div",{style:{overflowAnchor:"auto",height:"1px"}}),t.placeholder),r.a.createElement("div",{className:"new-list-item-input-wrapper"},r.a.createElement(jt,{onAdd:e.addItem})))})))}}]),n}(r.a.Component);At.defaultProps={canEditTitle:!0,showListMenu:!0,className:""};var Dt={onAdd:je.addListItem,onListRename:je.renameList,onListDelete:je.deleteList,onListCompleteAll:je.completeList,onListItemUpdate:je.updateListItem,onListItemComplete:je.completeListItem},_t=y()(Object(c.c)((function(e){return{sortBy:e.lists.sortBy,collaborators:e.lists.collaborators}}),Dt))(At),Tt=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.list,a=t.index;return r.a.createElement(rt.b,{draggableId:"list-".concat(n.id),index:a},(function(t,n){var a=Object(T.a)({ref:t.innerRef},t.draggableProps,{},t.dragHandleProps),i=Object(T.a)({},t.draggableProps.style);return r.a.createElement(_t,Object.assign({},e.props,{draggableProps:a,style:i}))}))}}]),n}(r.a.Component),Ct="LOGIN",Lt="LOGOUT",Nt={loggedIn:!1,user:{}},xt={login:function(e){return{type:Ct,payload:e}},logout:function(){return{type:Lt}}},St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ct:return Object(T.a)({},e,{user:t.payload,loggedIn:!0});case Lt:return Object(T.a)({},e,{user:{},loggedIn:!1});default:return e}},Bt=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleLogin=function(){a.setState({loading:!0},(function(){P.getUser(a.state.apiTokenField).then((function(e){e.error?(console.warn("could not login user:",e),a.setState({loading:!1,loginIntent:w.a.DANGER})):a.setState({loading:!1},(function(){return a.props.login(e.user)}))})).catch((function(e){console.error("could not get user:",e),a.setState({loading:!1,loginIntent:w.a.DANGER})}))}))},a.isValidToken=function(){return a.state.apiTokenField.length>=40},a.state={apiTokenField:"",loginIntent:w.a.PRIMARY,loading:!1},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return(r.a.createElement(k.e,{autoFocus:!0,canEscapeKeyClose:!1,canOutsideClickClose:!1,enforceFocus:!0,isCloseButtonShown:!1,icon:"log-in",isOpen:!this.props.loggedIn,title:"Login"},r.a.createElement("div",{className:"bp3-dialog-body"},r.a.createElement("p",null,"Please enter your Todoist API token below."),r.a.createElement("p",{className:"small-text"},"Your ",r.a.createElement("strong",null,"API token")," can be found in Todoist Settings under the"," ",r.a.createElement("a",{href:"https://todoist.com/Users/viewPrefs?page=integrations",target:"_blank",rel:"noopener noreferrer",className:"link"},"Integrations menu"),".",r.a.createElement("br",null),"Note that this API token is only stored locally on your computer and is never sent to Kanbanist."),r.a.createElement(k.j,{value:this.state.apiTokenField,intent:this.state.loginIntent,leftIcon:"user",type:"text",placeholder:"API Token e.g. 2cc9d26a60a8ad40d08724d92db9ad496ae6fe20",onKeyPress:function(t){return"Enter"===t.key&&e.isValidToken()&&e.handleLogin()},onChange:function(t){return e.setState({apiTokenField:t.target.value})}}),r.a.createElement("p",{className:"small-text"},"If you are seeing this login screen whenever you visit Kanbanist, please make sure your browser is not clearing website data (localStorage) when you close the window.")),r.a.createElement("div",{className:"bp3-dialog-footer"},r.a.createElement("div",{className:"bp3-dialog-footer-actions"},r.a.createElement(h.a,{to:"/"},r.a.createElement(k.b,{text:"Cancel",intent:w.a.DANGER})),r.a.createElement(k.b,{intent:w.a.PRIMARY,onClick:this.handleLogin,text:"Login",loading:this.state.loading,disabled:!this.isValidToken()})))))}}]),n}(r.a.Component),Pt=Object(c.c)((function(){return{}}),(function(e){return{login:function(t){e(xt.login(t)),e(je.fetchLists())}}}))(Bt),Rt="item",Ft="list",Mt=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).onDragEnd=function(e){var t=a.props,n=t.moveItem,r=t.updateListIndex,i=e.source,o=e.destination,s=e.draggableId;if(o){var l=s.split("-"),c=Object(Ze.a)(l,2),u=c[0],d=c[1];if(u===Rt)return n(d,i.droppableId,o.droppableId,o.index);if(u===Ft)return r(d,o.index)}},a.intervalId=null,a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loggedIn,n=e.fetch;t&&(n(),this.intervalId=setInterval(n,6e4))}},{key:"componentWillUnmount",value:function(){this.intervalId&&clearInterval(this.intervalId)}},{key:"render",value:function(){var e=this.props,t=e.loggedIn,n=e.lists,a=e.showBacklog,i=e.backlogList,o=(a?[i]:[]).concat(n.toArray());return r.a.createElement("div",{className:"ListsPanel",style:this.props.style},r.a.createElement(rt.a,{onDragEnd:this.onDragEnd},t?null:r.a.createElement(Pt,null),r.a.createElement(rt.c,{droppableId:"lists",type:"COLUMN",direction:"horizontal"},(function(e,t){return r.a.createElement("div",{className:"ListPanel-inner",ref:e.innerRef},o.map((function(e,t){return W(e)?r.a.createElement(_t,{key:e.id,list:e,className:"BacklogList List",canEditTitle:!1,showListMenu:!1}):r.a.createElement(Tt,{className:"DraggableList",key:e.id,list:e,index:t+(a?-1:0)})})),e.placeholder,r.a.createElement(st,null))}))))}}]),n}(r.a.Component),Ut={fetch:je.fetchLists,moveItem:je.moveItem,updateListIndex:je.updateListIndex},Gt=y()(Object(c.c)((function(e){return{loggedIn:e.user.loggedIn}}),Ut))(Mt),Qt=n(51);function Yt(e){var t=e.lists,n=e.projects,a=e.filteredLists,r=e.filteredProjects,i=e.filteredPriorities,o=e.filterDueDate,s=e.showIfResponsible,l=e.startDate,c=e.endDate,u=e.namedFilter,d={};if(!a.isEmpty()){var m=t.filter((function(e){return!a.map((function(e){return e.id})).contains(e.id)})).map((function(e){return e.title}));d.lists=JSON.stringify(m.toArray())}if(!r.isEmpty()){var f=n.filter((function(e){return!r.map((function(e){return e.id})).contains(e.id)})).map((function(e){return e.name}));d.projects=JSON.stringify(f.toArray())}if(!i.isEmpty()){var p=Q.filter((function(e){return!i.map((function(e){return e.id})).contains(e.id)})).map((function(e){return e.id}));d.priorities=JSON.stringify(p.toArray())}s&&(d.assigned=JSON.stringify(s));var h=o.get("startDate",null),b=o.get("endDate",null);l?d.start=l.valueOf():void 0===l&&h&&(d.start=h.valueOf()),c?d.end=c.valueOf():void 0===c&&b&&(d.end=b.valueOf()),u&&(d.filter=u);var g=Object(C.List)(Object.keys(d));return g.isEmpty()?"":"?"+g.map((function(e){return e+"="+d[e]})).join("&")}var Vt=function(e){return function(t){return function(n){var a=e.getState(),r=a.router,i=a.lists,o=e.dispatch,s=i.showIfResponsible;switch(n.type){case be:s=!s;case me:case fe:case pe:case Ee:case he:var l=Yt(Object(T.a)({},i,{},n.payload,{showIfResponsible:s}));o(l?Object(Qt.d)(r.location.pathname+l):Object(Qt.d)(r.location.pathname));break;case ve:o(Object(Qt.d)(r.location.pathname))}t(n)}}},Wt=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.history,t=e.location,n=t.pathname,a=t.search,r=Yt(this.props);""!==r||""===a?r&&r!==decodeURI(a)&&e.push(n+r):e.push(n)}},{key:"render",value:function(){var e=this.props,t=e.showToolbar,n=e.showBacklog,a=e.backlogList,i=e.filteredLists,o=e.lists,s=e.filteredProjects,l=e.filteredPriorities,c=e.filterDueDate,u=e.namedFilter,d=e.actions,m=e.containerWidth,f=e.showIfResponsible,p=e.showSubtasks,h=e.user,b=e.fetchFail,g=e.fetching,E="/board"===this.props.location.pathname&&t,v=r.a.createElement(at,{toggleBacklog:d.ui.toggleBacklog,lists:o,filteredLists:i,updateListsFilter:d.lists.updateListsFilter,filteredProjects:s,updateProjectsFilter:d.lists.updateProjectsFilter,onClearFilters:d.lists.clearFilters});if(m<740)return r.a.createElement("div",{className:"Board"},r.a.createElement("div",{className:"Board-inner"},r.a.createElement("p",null,"It looks like you are visiting from a phone (or a computer with a screen for ants)."),r.a.createElement("p",null,"Kanbanist is built for bigger screens but if you hit the button below, you'll be prompted to create a reminder in Todoist to checkout Kanbanist when you get back to your computer."),r.a.createElement("div",{className:"margin-25px-auto text-align-center"},r.a.createElement("a",{href:"todoist://addtask?content=Check%20out%20%5BKanbanist%5D(https://kanban.ist)!&date=today"},r.a.createElement(k.b,{text:"Remind me about Kanbanist",intent:w.a.DANGER,className:"pt-icon-time"})))));if(b)return r.a.createElement("div",{className:"Board"},r.a.createElement("div",{className:"Board-inner"},r.a.createElement(k.n,{visual:g?"refresh":"error",title:"Unable to fetch Todoist tasks",description:r.a.createElement("div",null,r.a.createElement("p",null,"Kanbanist was unable to fetch your Todoist tasks. Please try the following:"),r.a.createElement("ul",{style:{width:"100%",textAlign:"left"}},r.a.createElement("li",null,"Ensure you have internet connectivity."),r.a.createElement("li",null,"Disable any ad-blockers for this site."),r.a.createElement("li",null,"Check your"," ",r.a.createElement("a",{href:"https://todoist.com/Users/viewPrefs?page=integrations",target:"_blank",rel:"noopener noreferrer",className:"link"},"API token")," ","by logging out and back in."),r.a.createElement("li",null,"If Kanbanist still cannot fetch your tasks,"," ",r.a.createElement("a",{href:"mailto:m.wakerman+kanbanistbug@gmail.com?subject=I%20found%20a%20bug%20with%20Kanbanist"},"file a bug"),".")),r.a.createElement("p",null))})));var y=s.map((function(e){return e.id})),I=c.get("startDate",null),O=c.get("endDate",null),A=null!==I&&null!==O,D=function(e){if(y.contains(e.project.id))return!1;if(l.map((function(e){return e.key})).contains(e.priority))return!1;if(e.project.shared&&f)return e.responsible_uid===h.id;if(A&&!e.due_date_utc)return!1;if(u)switch(u){case X.NEXT_7_DAYS:if(!e.due_date_utc)return!1;if(j()(e.due_date_utc).isAfter(j()().add(7,"days"),"day"))return!1;break;case X.TODAY:if(!e.due_date_utc)return!1;if(j()(e.due_date_utc).isAfter(j()(),"day"))return!1;break;case X.NO_DUE_DATE:if(e.due_date_utc)return!1}return A&&e.due_date_utc?j()(e.due_date_utc).isBefore(O.clone().add(10,"minutes")):!(!p&&null!==e.parent_id)},_=o.filter((function(e){return!i.map((function(e){return e.id})).contains(e.id)})).map((function(e){return e.setItems(e.items.filter(D))})),T=a.setItems(a.items.filter(D));return r.a.createElement("div",{className:"Board"},E?v:null,r.a.createElement(Gt,{lists:_,showBacklog:n,backlogList:T}))}}]),n}(a.Component),Kt=y()(Object(c.c)((function(e){return{showToolbar:e.ui.showToolbar,showBacklog:e.ui.showBacklog,backlogList:e.lists.backlog,lists:e.lists.lists,filteredLists:e.lists.filteredLists,projects:e.lists.projects,defaultProjectId:e.lists.defaultProjectId,filteredProjects:e.lists.filteredProjects,filteredPriorities:e.lists.filteredPriorities,filterDueDate:e.lists.filterDueDate,namedFilter:e.lists.namedFilter,showIfResponsible:e.lists.showIfResponsible,showSubtasks:e.lists.showSubtasks,user:e.user.user,fetchFail:e.lists.fetchFail,fetching:e.lists.fetching}})))(Wt),Ht="TOGGLE_TOOLBAR",Jt="TOGGLE_BACKLOG",zt="RESTORE_INITIAL_STATE",Zt={showToolbar:!1,showBacklog:!1},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ht:var n=!e.showToolbar;return n?Object(T.a)({},e,{showToolbar:n}):Object(T.a)({},e,{showBacklog:!1,showToolbar:n});case Jt:return Object(T.a)({},e,{showBacklog:!e.showBacklog});case zt:return Zt;default:return e}},Xt={toggleToolbar:function(){return{type:Ht}},toggleBacklog:function(){return{type:Jt}},restoreInitialState:function(){return{type:zt}}},$t=n(218),en=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.fetching,i=t.logout,o=t.fetchLists,s=t.toggleToolbar,l=n.loggedIn,c=n.token,u=r.a.createElement(k.a,{text:"Logout",icon:"log-out",onClick:function(){i(),e.props.history.push("/")},intent:w.a.PRIMARY}),d=r.a.createElement(k.a,{text:"Backlog",icon:"comparison",onClick:this.props.toggleBacklog,intent:w.a.PRIMARY}),m=r.a.createElement(k.a,{loading:a,icon:"refresh",onClick:function(){return o(c)},intent:w.a.WARNING}),f=r.a.createElement(h.a,{to:"/board"},r.a.createElement(k.b,{text:"Login",icon:"log-in",intent:w.a.PRIMARY})),p=r.a.createElement(k.a,{text:"Filters",icon:"filter-list",intent:w.a.PRIMARY,onClick:s}),b="/board"===this.props.history.location.pathname,g=b&&l,E=r.a.createElement(k.b,{minimal:!0,icon:"control",text:"Board"});return r.a.createElement(k.m,{className:"Header"},r.a.createElement(k.m.Group,{align:$t.Alignment.LEFT},r.a.createElement(k.m.Heading,{className:"font-roboto"},r.a.createElement(h.a,{to:"/"},"Kanbanist")),r.a.createElement(k.m.Divider,null),b?E:r.a.createElement(h.a,{to:"/board"},E)),r.a.createElement(k.m.Group,{align:$t.Alignment.RIGHT,className:"hide-if-small-500"},g?m:null,g?d:null,g?p:null,l?u:f))}}]),n}(r.a.Component),tn=Object(p.f)(Object(c.c)((function(e){return{user:e.user,fetching:e.lists.fetching}}),(function(e){return{logout:function(){e(je.clearAll()),e(Xt.restoreInitialState()),e(xt.logout())},fetchLists:function(t){e(je.fetchLists(t))},toggleToolbar:function(){e(Xt.toggleToolbar())},toggleBacklog:function(){e(Xt.toggleBacklog())}}}))(en)),nn=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"Footer bp3-navbar bp3-dark"},r.a.createElement("div",{className:"bp3-navbar-group bp3-align-left"},r.a.createElement("a",{href:"https://github.com/mwakerman/kanbanist",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("button",{className:"bp3-button bp3-minimal bp3-icon-code"})),r.a.createElement("span",{className:"bp3-navbar-divider hide-if-small-750"}),r.a.createElement(k.q,{content:"Support Kanbanist",on:"hover",position:ut.a.RIGHT},r.a.createElement("a",{href:"https://www.buymeacoffee.com/RUZ5hab",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("button",{className:"bp3-button bp3-minimal bp3-icon-dollar"})))),r.a.createElement("div",{className:"bp3-navbar-group bp3-align-right"},r.a.createElement(h.a,{to:"/issues",className:"hide-if-small-750"},r.a.createElement("button",{className:"bp3-button bp3-minimal bp3-icon-application"},"Known Issues")),r.a.createElement("a",{href:"https://github.com/mwakerman/kanbanist/issues",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("button",{className:"bp3-button bp3-minimal bp3-icon-error hide-if-small-750"},"Bugs & Feature Requests")),r.a.createElement("span",{className:"bp3-navbar-divider hide-if-small-750"}),r.a.createElement(k.q,{content:"v.".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/kanbanist",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_VERSION),position:ut.a.LEFT,on:"hover"},r.a.createElement(k.i,{icon:"info-sign"})))))}}]),n}(r.a.Component),an=(n(748),n(749),function(){return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"page-content Issues"},r.a.createElement("h2",null,"Known Issues"),r.a.createElement("p",null,"This page lists known issues with Kanbanist, please read before sending a Bug or Feature Request email."),r.a.createElement("hr",null),r.a.createElement("h4",null,"ISSUE 01: Ordering items within a list."),r.a.createElement("p",null,"The Todoist API does not current allow for custom ordering of items within labels (as it does for projects). I submitted a feature request with Todoist and got the following response:"," ",r.a.createElement("em",null,'"We might look at doing something about that later, but currently we don\'t have the resources unfortunately, sorry about that."'),"."),r.a.createElement("h4",null,"ISSUE 04: General support for Todoist Filters"),r.a.createElement("p",null,"I've received a number of requests for supporting Todoist Filters in various ways. Most commonly to allow a filter to be applied to the entire board. I contacted Todoist support to ask about the endpoint and they responded that the Todoist Filters API endpoint is not currently working (which is why it's been removed from the developer documentation) but they will notify when/if it is fixed. Currently Todoist Filters are applied by each application client rather than the server which would be a huge amount of work to support in Kanbanist.")))}),rn=n(316),on=n.n(rn),sn=function(){return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"page-content Home"},r.a.createElement("h2",null,"Welcome to Kanbanist"),r.a.createElement("p",null,r.a.createElement("em",null,"The missing Kanban board for Todoist")),r.a.createElement("hr",null),r.a.createElement("img",{src:on.a,alt:"screenshot",style:{width:"100%"}}),r.a.createElement("ul",{className:"home-paragraph",style:{lineHeight:"1.6em",listStyle:"none"}},r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"filter"},"\ud83d\udee0")," ","Use filters to craft the perfect board"),r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"bookmark"},"\ud83d\udcd6")," ","Bookmark your favourite boards"),r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"quick add"},"\u26a1\ufe0f")," ","Use quick-add syntax to create tasks in #projects, with due dates and (p)riorities"),r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"privacy"},"\ud83d\udd10")," ","Kanbanist talks only to Todoist, so your tasks stay completely ",r.a.createElement("strong",null,"private")),r.a.createElement("li",null,r.a.createElement("span",{role:"img","aria-label":"open source"},"\ud83d\ude4c")," ","Open Source: checkout the"," ",r.a.createElement("a",{href:"https://github.com/mwakerman/kanbanist",target:"_blank",rel:"noopener noreferrer"},"project on github"),".")),r.a.createElement("p",{style:{width:"100%",margin:"20px auto",textAlign:"center"}},r.a.createElement(h.a,{className:"Home-Button",to:"/board"},r.a.createElement(k.b,{className:" bp3-large",intent:w.a.SUCCESS,text:"Get Started"})),r.a.createElement(h.a,{className:"Home-Button",to:"/demo"},r.a.createElement(k.b,{className:"bp3-large",intent:w.a.WARNING,text:"Demo Video"})))))},ln=function(){return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"page-content Home"},r.a.createElement("h2",null,"Kanbanist Demo Video"),r.a.createElement("hr",null),r.a.createElement("div",{className:"video-wrapper"},r.a.createElement("iframe",{title:"kanbanist demo",width:"560",height:"315",src:"https://www.youtube.com/embed/Y5rbyNZuFBQ",frameBorder:"0",allowFullScreen:!0}))))},cn=function(){return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"page-content Donate"},r.a.createElement("h2",{className:"font-roboto"},"Thanks!"),r.a.createElement("hr",null),r.a.createElement("p",null,"I used Todoist and wanted something like Trello's Kanban UI to manage and track my tasks and had given up on Todoist releasing ",r.a.createElement("a",{href:"https://blog.todoist.com/2016/02/04/boards-todoist-kanban/"},"Boards"),"\xa0 for a platform other than Windows 10. And so ",r.a.createElement("strike",null,"Todollo")," ",r.a.createElement("strike",null,"Trelloist")," Kanbanist was born. I hope it's something that you find useful too and feel free to send through any \xa0",r.a.createElement("a",{href:"mailto:m.wakerman+trelloistbug@gmail.com?subject=I%20found%20a%20bug%20with%20Trelloist"},"bug reports")," ","or \xa0",r.a.createElement("a",{href:"mailto:m.wakerman+trelloistfeature@gmail.com?subject=A%20feature%20request%20for%20Trelloist"},"feature requests"),"."),r.a.createElement("hr",null),r.a.createElement("h6",null,"PayPal"),r.a.createElement("p",null,r.a.createElement("form",{action:"https://www.paypal.com/cgi-bin/webscr",method:"post",target:"_top"},r.a.createElement("input",{type:"hidden",name:"cmd",value:"_s-xclick"}),r.a.createElement("input",{type:"hidden",name:"encrypted",value:"-----BEGIN PKCS7-----MIIHPwYJKoZIhvcNAQcEoIIHMDCCBywCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYAhDVbtTEjOkaC6LLqMpuMzAEp2Myx2yUikOaGQwdtTxTpGmVpvyWQHbenL45pd5s1+weHgZIw6Rk3hWlPq2kJIcoiZoYJWc0PWh2W/QUTb0yP7JkXNSpDl29YT1hbrc+WBKYFArb1pwIyZvRkt74PWY0dUNG8rXvIPWvym/RT6IDELMAkGBSsOAwIaBQAwgbwGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIeL1/saLkVKeAgZiOcGAZKc/OUOAl6ck3HYqABFM7A6CazwxuN+rOjqKoGjCtw2vc+lqAOlAPlbF9rBzbyUBHw7PkRWkgionDfj6jY4jRPrYdthyzGKARmamlmjlm3CVgAMQYRbyzueG2IITomF4xgIGJoQci7CemOubHUhGNbxy0liOKvLr2yc+gE2jzW+D11JkDVWuhCjX0UxVUtpFElv2A36CCA4cwggODMIIC7KADAgECAgEAMA0GCSqGSIb3DQEBBQUAMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbTAeFw0wNDAyMTMxMDEzMTVaFw0zNTAyMTMxMDEzMTVaMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAwUdO3fxEzEtcnI7ZKZL412XvZPugoni7i7D7prCe0AtaHTc97CYgm7NsAtJyxNLixmhLV8pyIEaiHXWAh8fPKW+R017+EmXrr9EaquPmsVvTywAAE1PMNOKqo2kl4Gxiz9zZqIajOm1fZGWcGS0f5JQ2kBqNbvbg2/Za+GJ/qwUCAwEAAaOB7jCB6zAdBgNVHQ4EFgQUlp98u8ZvF71ZP1LXChvsENZklGswgbsGA1UdIwSBszCBsIAUlp98u8ZvF71ZP1LXChvsENZklGuhgZSkgZEwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tggEAMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQEFBQADgYEAgV86VpqAWuXvX6Oro4qJ1tYVIT5DgWpE692Ag422H7yRIr/9j/iKG4Thia/Oflx4TdL+IFJBAyPK9v6zZNZtBgPBynXb048hsP16l2vi0k5Q2JKiPDsEfBhGI+HnxLXEaUWAcVfCsQFvd2A1sxRr67ip5y2wwBelUecP3AjJ+YcxggGaMIIBlgIBATCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwCQYFKw4DAhoFAKBdMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTE3MDIwNzEyNDA0NVowIwYJKoZIhvcNAQkEMRYEFAC+7tz7b6ALmwQpJ3NK36NPpeEQMA0GCSqGSIb3DQEBAQUABIGAL0+JJzGdPQgaWhLprAtlzhN9lbexRq/9UPiLADeiTy83vFMHMieiNSrq7FWap3cT6lDxamUjlHVcSY3ROtEuc6xXHvuC0r6R4SKXlMtsfQEnIUuonSYLyvaQVF0Whxif/vdimJ7JI6S38Iy1oLjj8DQuuORvMvHpuOwqnKfKp58=-----END PKCS7-----"}),r.a.createElement("input",{type:"image",src:"https://www.paypalobjects.com/en_AU/i/btn/btn_donate_LG.gif",name:"submit",alt:"PayPal \u2013 The safer, easier way to pay online!"}),r.a.createElement("img",{alt:"",src:"https://www.paypalobjects.com/en_AU/i/scr/pixel.gif",width:"1",height:"1"}))),r.a.createElement("hr",null),r.a.createElement("h6",null,"Other ways to support Trelloist"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"https://twitter.com/home?status=Checkout Trelloist: a kanban board for Todoist https://trelloist.com",target:"_blank",rel:"noopener noreferrer"},"Tweet support!")))))};g.a.initialize("UA-5257385-6",{debug:!1,titleCase:!1}),E.a.onlyShowFocusOnTabs();var un=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleLocationChange=function(e){var t=e.pathname;g.a.set({page:t}),g.a.pageview(t)},e}return Object(d.a)(n,[{key:"componentWillMount",value:function(){var e=this.props.history;this.unsubscribeFromHistory=e.listen(this.handleLocationChange),this.handleLocationChange(e.location)}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromHistory&&this.unsubscribeFromHistory()}},{key:"render",value:function(){var e=this.props,t=e.actions,n=e.history;return(r.a.createElement(b.a,{history:n},r.a.createElement("div",{className:"App"},r.a.createElement(tn,{history:n}),r.a.createElement("div",{className:"main-content"},r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:sn}),r.a.createElement(p.a,{path:"/board",component:function(e){return r.a.createElement(Kt,Object.assign({actions:t},e))}}),r.a.createElement(p.a,{path:"/issues",component:an}),r.a.createElement(p.a,{path:"/demo",component:ln}),r.a.createElement(p.a,{path:"/donate",component:cn}),r.a.createElement(p.a,{component:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"404 Not Found"),r.a.createElement(h.a,{to:"/"},"Home"))}}))),r.a.createElement(nn,null))))}}]),n}(r.a.Component),dn=function(e){var t=e.store,n=e.actions,a=e.history;return(r.a.createElement(c.a,{store:t},r.a.createElement(un,{actions:n,history:a})))},mn=(n(750),n(84)),fn=n(317),pn=(n(751),n(304));function hn(){var e={};if(localStorage.trelloist){var t=JSON.parse(localStorage.trelloist),n=localStorage.TRELLOIST_VERSION;if(!n||"9"!==n)return console.warn("Version bump, clearing localStorage..."),localStorage.clear(),localStorage.TRELLOIST_VERSION="9",{};e.user=t.user,e.lists={},e.lists.lists=C.List(t.lists.lists.map((function(e){var t=e.items.map((function(e){return new F(e)}));return new R({id:e.id,title:e.title,items:C.List(t)})})));var a=t.lists.backlog.items.map((function(e){return new F(e)}));e.lists.backlog=new R({id:0,title:"Backlog",items:C.List(a)}),e.lists.projects=C.List(t.lists.projects.map((function(e){return new M(e)})));var r=C.List(t.lists.filteredLists.map((function(e){return e.id}))),i=C.List(t.lists.filteredProjects.map((function(e){return e.id}))),o=Q.filter((function(e){return t.lists.filteredPriorities.indexOf(e.id)>=0}));e.lists.filterDueDate=C.Map({startDate:t.lists.filterDueDate.startDate?j()(t.lists.filterDueDate.startDate):null,endDate:t.lists.filterDueDate.endDate?j()(t.lists.filterDueDate.endDate):null});var s=t.lists.showIfResponsible,l=t.lists.namedFilter;e.lists.sortBy=new C.Map({field:t.lists.sortBy.field,direction:t.lists.sortBy.direction});var c=C.List(["lists","projects","priorities","start","end","assigned","filter"]).reduce((function(e,t){var n=function(e){var t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}(t);return"filter"===t&&n?e[t]=n:n&&(e[t]=JSON.parse(n)),e}),{}),u=c.lists,d=c.projects,m=c.priorities,f=c.start,p=c.end,h=c.assigned,b=c.filter;r=u?e.lists.lists.filter((function(e){return u.indexOf(e.title)<0})).map((function(e){return e.id})):C.List.of(),i=d?e.lists.projects.filter((function(e){return d.indexOf(e.name)<0})).map((function(e){return e.id})):C.List.of(),o=m?Q.filter((function(e){return m.indexOf(e.id)<0})):C.List.of(),e.lists.filterDueDate=C.Map({startDate:f?j()(f):null,endDate:p?j()(p):null}),s=h,l=b?X[b]:null,e.lists.filteredLists=e.lists.lists.filter((function(e){return r.contains(e.id)})),e.lists.filteredProjects=e.lists.projects.filter((function(e){return i.contains(e.id)})),e.lists.defaultProjectId=t.lists.defaultProjectId,e.lists.filteredPriorities=o,e.lists.showIfResponsible=s,e.lists.namedFilter=l,e.lists.collaborators=t.lists.collaborators,e.ui=t.ui}return e}var bn=n(305),gn=n(57),En=n(164),vn=function(e){return function(t){return function(n){var a=e.getState(),r=a.user.user.token,i=a.lists.defaultProjectId,o=a.lists.projects.find((function(e){return e.id===i}));switch(n.type){case re:!function(){var t=n.payload,a=t.list,i=t.item,s=i.content,l=i.temp_id,c=W(a)?"":"@".concat(a.title.replaceAll(" ","_").toLowerCase()),u=s.indexOf("#")>=0||!o?"":"#".concat(o.name.replaceAll(" ",""));P.quickAddItem(r,"".concat(s," ").concat(c," ").concat(u),l).then((function(t){var n=t.id;return e.dispatch(je.updateId(F,l,"".concat(n)))})).then((function(){return e.dispatch(je.fetchLists())})).catch((function(e){return console.error("could not add item",e)}))}();break;case ne:!function(){var e=n.payload.list.items.map((function(e){return e.id}));P.completeListItems(r,e)}();break;case ae:!function(){var e=n.payload.list;e.items.forEach((function(e){return P.updateItem(r,{id:e.id,labels:[]})})),W(e)||P.deleteLabel(r,e.id)}();break;case oe:!function(){var e=n.payload.item;P.completeListItem(r,e.id)}();break;case ie:!function(){var e=n.payload,t=e.item,a=e.fields,i={id:t.id},o=a.text,s=a.due;o&&(i.content=o),s&&s.date?i.due=s:s&&null===s.date&&(i.due=null),P.updateItem(r,i)}();break;case ee:!function(){for(var t=n.payload,i=t.name,o=t.temp_id,s=i,l=a.lists.lists.map((function(e){return e.title})).contains(s);l;)s+=" 2",l=a.lists.lists.map((function(e){return e.title})).contains(s);var c={name:s,item_order:a.lists.lists.size+1};P.addLabel(r,c,o).then((function(t){e.dispatch({type:se,payload:{type:R,old_id:o,new_id:t.temp_id_mapping[o]}})}))}();break;case te:!function(){for(var e=n.payload,t=e.list,i=e.newListName,o=a.lists.lists.map((function(e){return e.title})).contains(i);o;)i+=" 2",o=a.lists.lists.map((function(e){return e.title})).contains(i);W(t)||P.updateLabelName(r,t.id,i)}();break;case we:console.log("Move called");var s=n.payload,l=s.itemId,c=s.fromListId,u=s.toListId;if(c===u)break;var d=a.lists.lists.push(a.lists.backlog).find((function(e){return e.id===c})),m=a.lists.lists.push(a.lists.backlog).find((function(e){return e.id===u})),f=d.get("items").find((function(e){return e.id===l})),p=a.lists.lists.filter((function(e){return e.items.map((function(e){return e.id})).includes(l)})).map((function(e){return e.id})).concat(W(m)?[]:[u]).filter((function(e){return!V(e)&&e!==c})).toSet().toArray();console.log(p);var h=j()(u),b=h.diff(new Date,"days"),g={id:f.id,due:{date:h.format("YYYY-MM-DD"),string:"in "+b+" days",recurring:!1}};console.log("===="),console.log(g),P.updateItem(r,g);break;case Ie:var E=n.payload,v=E.listId,y=E.newIndex,k=a.lists.lists,w=k.find((function(e){return e.id===v})),I=k.filter((function(e){return e.id!==v})).insert(y,w).map((function(e){return e.id})).reduce((function(e,t,n){return Object.assign(e,Object(En.a)({},t,n))}),{});P.updateLabelOrder(r,I)}t(n)}}},yn=function(e){return function(e){return function(t){return e(t)}}},kn=function(e){return function(e){return function(t){switch(t.type){case Ct:var n=t.payload;l.a.setUserContext({userId:n.id,userTz:n.tz_info.timezone,premium:n.is_premium})}e(t)}}},wn=function(){var e=Object(gn.a)(),t=Object(mn.c)({router:Object(b.b)(e),lists:Je,user:St,ui:qt}),n=yn,a=Object(mn.a)(n,kn,vn,Object(pn.save)({namespace:"trelloist"}),fn.a,Object(bn.a)(e),Vt),r={};try{r=hn()}catch(o){console.error("Could not load initialState from localStorage.",o),localStorage.clear()}var i=Object(mn.d)(t,r,a);return{store:i,actions:{lists:Object(mn.b)(je,i.dispatch),user:Object(mn.b)(xt,i.dispatch),ui:Object(mn.b)(Xt,i.dispatch)},history:e}};String.prototype.hashCode=function(){var e,t,n=0;if(0===this.length)return n;for(e=0,t=this.length;e<t;e++)n=(n<<5)-n+this.charCodeAt(e),n|=0;return n},window.escapeRegExp=function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(window.escapeRegExp(e),"g"),t)},window.generateUUID=function(){var e=(new Date).getTime();return window.performance&&"function"===typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))},l.a.config("https://4e4d1ac0c746404c90f4b0248a554a39@sentry.io/237417",{release:Object({NODE_ENV:"production",PUBLIC_URL:"/kanbanist",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_VERSION}).install();var In=wn(),jn=In.store,On=In.actions,An=In.history;o.a.render(r.a.createElement(dn,{store:jn,actions:On,history:An}),document.getElementById("root"))}},[[352,1,2]]]);
//# sourceMappingURL=main.7f8976e6.chunk.js.map